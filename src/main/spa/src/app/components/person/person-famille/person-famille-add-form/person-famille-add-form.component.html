<div class="card-body">
  <form class="mat-form" [formGroup]="personAddForm" (ngSubmit)="submitForm()">

    <mat-form-field appearance="outline">
      <mat-label>Genre</mat-label>
      <mat-select formControlName="genre">
        <mat-option value="FEMININ">Féminin</mat-option>
        <mat-option value="MASCULIN">Masculin</mat-option>
      </mat-select>
    </mat-form-field>

 <div class="form-group">
  <mat-form-field appearance="outline">
    <mat-label>Nom</mat-label>
    <input matInput type="text"
    class="form-control"
    id="nom"
    formControlName="nom"
    [ngClass]="{
      'is-invalid':
        (personAddForm.get('nom')!.touched ||
          personAddForm.get('nom')!.dirty) &&
        !personAddForm.get('nom')!.valid
    }">
    <span class="invalid-feedback">
      <span *ngIf="personAddForm.get('nom')!.errors?.['required']">
        Veuillez entrer le nom.
      </span>
      <span *ngIf="personAddForm.get('nom')!.errors?.['minlength']">
        Le nom doit avoir au moins 2 caractères.
      </span>
      <span *ngIf="personAddForm.get('nom')!.errors?.['maxlength']">
        Le nom doit avoir au max 50 caractères.
      </span>
    </span>
  </mat-form-field>
</div>

<div class="form-group">
  <mat-form-field appearance="outline" >
    <mat-label>Prenom</mat-label>
    <input matInput
    type="text"
    class="form-control"
    id="prenom"
    placeholder="Prenom"
    formControlName="prenom"
    [ngClass]="{
      'is-invalid':
        (personAddForm.get('prenom')!.touched ||
          personAddForm.get('prenom')!.dirty) &&
        !personAddForm.get('prenom')!.valid
    }">
    <span class="invalid-feedback">
      <span *ngIf="personAddForm.get('prenom')!.errors?.['required']">
        Veuillez entrer le prénom.
      </span>
      <span *ngIf="personAddForm.get('prenom')!.errors?.['minlength']">
        Le prénom doit avoir au moins 2 caractères.
      </span>
      <span *ngIf="personAddForm.get('prenom')!.errors?.['maxlength']">
        Le prénom doit avoir au max 50 caractères.
      </span>
    </span>
  </mat-form-field>
</div>

<div class="form-group">
  <mat-form-field appearance="outline">
    <mat-label>Description</mat-label>
    <input matInput
    type="text"
    class="form-control"
    id="description"
    formControlName="description">
    <span class="invalid-feedback">
      <span *ngIf="personAddForm.get('description')!.errors?.['minlength']">
        La description doit avoir au moins 2 caractères.
      </span>
      <span *ngIf="personAddForm.get('description')!.errors?.['maxlength']">
        La description doit avoir au max 100 caractères.
      </span>
    </span>
  </mat-form-field>
</div>

<div class="form-group">
  <mat-form-field appearance="outline">
    <mat-label>Date de naissance</mat-label>
    <input matInput
    type="date"
    class="form-control"
    id="dateNaissance"
    formControlName="dateNaissance"
    [ngClass]="{
      'is-invalid':
        (personAddForm.get('dateNaissance')!.touched ||
          personAddForm.get('dateNaissance')!.dirty) &&
        !personAddForm.get('dateNaissance')!.valid
    }"
  />
  <span class="invalid-feedback">
    <span *ngIf="personAddForm.get('dateNaissance')!.errors?.['required']">
      Veuillez entrer la date de naissance.
    </span>
  </span>
  </mat-form-field>
</div>

    <mat-form-field appearance="outline">
      <mat-label>Poids</mat-label>
      <input matInput type="number"
      formControlName="poids" min="10" max="200">
      <span matSuffix>kg</span>
      <mat-error *ngIf="personAddForm.invalid">Le poids doit être compris entre 10 kg et 200 kg.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Taille</mat-label>
      <input matInput type="number"
      formControlName="taille" min="60" max="250">
      <span matSuffix>cm</span>
      <mat-error *ngIf="personAddForm.invalid">Le poids doit être comprise entre 60 cm et 250 cm.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Activité</mat-label>
      <mat-select formControlName="activite">
        <mat-option value="SEDENTAIRE">Sédentaire</mat-option>
        <mat-option value="PEU_ACTIF">Peu actif</mat-option>
        <mat-option value="ACTIF">Actif</mat-option>
        <mat-option value="TRES_ACTIF">Très actif</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Objectif calorique</mat-label>
      <input matInput type="number"
      formControlName="objectifCalorique" min="0" max="200">
      <span matSuffix>%</span>
      <mat-error *ngIf="personAddForm.invalid">Le poids doit être comprise entre 0% et 200%.</mat-error>
    </mat-form-field>

    <!-- <mat-form-field appearance="outline">
      <mat-label>Besoins caloriques</mat-label>
      <input matInput type="number"
      formControlName="besoinsCaloriques">
      <span matSuffix class="kcal">kcal</span>
    </mat-form-field> -->

    <br />

    <div class="alert alert-success text-center" role="alert" *ngIf="message">
      {{message}}
    </div>
    <div class="btn">
      <button mat-stroked-button
      type="submit"
      [disabled]="!personAddForm?.valid"
      (click)="goToMainView()">Enregistrer</button>
    </div>
  </form>
</div>
